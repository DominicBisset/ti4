<div class="tech">
    <h3>{tech.name}</h3>
    {#each tech.text.split("\n") as line}
        <p>{line}</p>
    {/each}
    {#each Object.entries(tech.prerequisites) as [prerequisite, count]}
        {#each range(count) as c}
            <svelte:component this="{icon(prerequisite)}" name="icon"></svelte:component>
        {/each}
    {/each}
    {#each Object.entries(tech.provides) as [provides, count]}
        {#each range(count) as c}
            <div class="provides {provides}">&nbsp;</div>
        {/each}
    {/each}
</div>

<style>
    .tech{
        background-color: lightgray;
    }
    .prerequisite, .provides{
        width: 30px;
        height:30px;
        border-radius: 15px;
        display: inline-block
    }
    .provides{
        float: right;
    }
    .r{
        background-color: red
    }
    .g{
        background-color: green
    }
    .b{
        background-color: blue
    }
    .y{
        background-color: yellow
    }
</style>

<script>
    import WarfareTechIcon from "./WarfareTechIcon.html";
    import BioticTechIcon from "./BioticTechIcon.html";
    import PropulsionTechIcon from "./PropulsionTechIcon.html";
    import CyberneticTechIcon from "./CyberneticTechIcon.html";
    export default{
        helpers:{
            range: function(max){
                let output = []
                let c = 0;
                while( c!= max){
                    output.push(c);
                    c += 1;
                }
                return output;
            },
            icon: function(prerequisite){
                switch(prerequisite){
                    case 'r':
                        return WarfareTechIcon;
                    case 'g':
                        return BioticTechIcon;
                    case 'b':
                        return PropulsionTechIcon;
                    default:
                        return CyberneticTechIcon;

                } 
            }
        }
    }
</script>