<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Twilight Imperium Games Day</title>
        <link href="https://fonts.googleapis.com/css?family=Nunito|Spectral+SC" rel="stylesheet"> 
        <link rel='stylesheet' href='global.css'>
    </head>
    <body>
        <header>
            <h1>Let's Play Twilight Imperium<br/><span class="subheading">Round Two<span></h1>
            <p>Join me on the 3rd of November 2018 to play an eight-hour Space Opera</p>
        </header>
        <aside>
            <h2>Key Details:</h2>
            <ul>
                <li>Where: My House</li>
                <li>When: Saturday, 3rd of November</li>
                <li>What time: 10:30am sharp</li>
                <li>Places are given out on request and on commitment of reading the rules, being on time, and acting according to the spirit of the game</li>
            </ul>
        </aside>
        <main>
            <section id="section_abstract">
                <p>
                    I own <a href="https://www.fantasyflightgames.com/en/products/twilight-imperium-fourth-edition">Twilight Imperium.</a>  Its an eight-hour, six player game. This is not something you pull out casually after dinner.  This takes organisation.
                </p>
            </section>
            <section id="section_event">
                <h2>Techs</h2>
                <p>
                    Here's a list of the game's techs for reference:
                </p>
                <div id="techlist">

                </div>
            </section>
        </main>
        <script>
            (async function(){
            let response = await fetch('./data/technologies.json');
            let data = await response.json();
            var d = document;
            var list = d.getElementById("techlist");
            for(key in data.techs){
                var tech = data.techs[key];
                var div = d.createElement("div");
                div.setAttribute("class","techitem");
                var h3 = d.createElement("h3");
                h3.textContent  = tech.name;
                div.appendChild(h3);
                for (textFragment in tech.text.split('\n')){
                    var p = d.createElement("p");
                    p.textContent  = textFragment;
                    div.appendChild(p);
                }
                prerequisiteGroups = tech.prerequisites.reduce((groups, prerequisite)=>{
                        groups[prerequisite] = (groups[prerequisite] || 0) + 1;
                        return groups
                    },{});
                for (key2 in prerequisiteGroups){
                    prerequisiteGroup = prerequisiteGroups[key2];
                    var icon = d.createElement("p");
                    p.textContent  = string(prerequisiteGroup);
                    div.appendChild(p);
                }
                var h3 = d.createElement("h3");
                h3.textContent  = tech.name;
                div.appendChild(h3);
                list.appendChild(div);
            }
            })();
        </script>
    </body>
</html>
    
